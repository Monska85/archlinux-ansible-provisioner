---
- name: Install gnome
  block:
    - name: Install xorg
      community.general.pacman:
        name:
          - xorg
          - xorg-server
    - name: Install gnome packages
      community.general.pacman:
        name:
          - gdm
          - gnome
          - gnome-extra
          - gnome-shell-extension-appindicator
          - power-profiles-daemon
          - networkmanager
          - xorg-server
        state: present
        update_cache: yes
    - name: Install gnome aur dependencies
      kewlfft.aur.aur:
        use: paru
        name:
          - gnome-shell-extension-desktop-icons-ng
          - gnome-shell-extension-just-perfection-desktop-git
      become: yes
      become_user: aur_builder
    - name: "Enable gdm"
      shell: systemctl enable gdm
    - name: "Enable NetworkManager"
      shell: systemctl enable NetworkManager
    - name: "Enable power-profiles-daemon"
      shell: systemctl enable power-profiles-daemon
